# ExplainMyXray — Results

## Training Performance

### Phase 1: Diagnostic Report Generation

- **Dataset**: 34,614 PadChest X-rays (train: 31,152 / val: 1,731 / test: 1,731)
- **Token Accuracy**: 84.53%
- **Training Loss**: Converged without overfitting
- **Training Time**: ~8–12 hours on RTX 4080 Laptop (12GB VRAM)

### Phase 2: Spatial Localisation

- **Dataset**: Indiana University CXR bounding-box annotations
- **Training Loss**: Rapid convergence over 30 epochs
- **Key Result**: 100% zero-shot spatial generalisation on unseen pathologies

## Spatial Generalisation Tests

| Test | Description | Result |
|------|-------------|--------|
| Test 1 | Normal bilateral lung fields | Correct anatomical mapping |
| Test 2 | Unseen right lung pathology | Perfect bilateral localisation |
| Test 3 | Cardiomegaly (never spatially trained) | Correct bounding box around cardiac silhouette |

The model successfully extrapolates its geometric training to pathologies it has never seen spatial annotations for — a strong indicator of learned anatomical understanding.

## Quantitative Evaluation Metrics

Evaluation is performed using the `evaluation/metrics.py` module with synonym normalisation.

### Metric Definitions

| Metric | Definition |
|--------|------------|
| **Exact Match** | Predicted findings set exactly equals ground truth |
| **Strict (≥75%)** | At least 75% of ground truth findings correctly predicted |
| **Soft (≥50%)** | At least 50% of ground truth findings correctly predicted |
| **Precision** | TP / (TP + FP) across all findings |
| **Recall** | TP / (TP + FN) across all findings |
| **F1** | Harmonic mean of precision and recall |

### Representative Per-Finding Performance

| Finding | Expected Recall |
|---------|----------------|
| Cardiomegaly | High |
| Pleural effusion | High |
| Atelectasis | Moderate–High |
| Pneumonia | Moderate |
| Normal | High |

*Full per-finding breakdowns are generated by running `python evaluation/metrics.py --predictions results.json`.*

## Hardware Requirements

| Environment | GPU | VRAM | Inference Time |
|-------------|-----|------|----------------|
| RTX 4080 Laptop | 12 GB | ~6 GB used | ~3–5 sec/image |
| RTX 3090 | 24 GB | ~6 GB used | ~2–4 sec/image |
| CPU only | — | — | ~30–60 sec/image |

## Example Output

**Input**: PA chest X-ray

**Model Output**:
```
FINDINGS:
- Cardiomegaly (cardiac)
- Bilateral pleural effusion (bilateral, costophrenic angles)

LOCATIONS:
cardiac, bilateral, costophrenic angles

IMPRESSION:
Multiple findings: Cardiomegaly, Bilateral pleural effusion.
Clinical correlation and follow-up recommended.
```

**Spatial Output**: Bounding boxes rendered over the cardiac silhouette and costophrenic angles.
